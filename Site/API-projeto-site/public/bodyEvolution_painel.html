<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="shortcut icon" href="IMGS/logo's/logo_transparent.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bem vindo!</title>

    <script src="JS/funcoes.js"></script>
    <link rel="stylesheet" href="CSS/styleBodyEvolution.css">

</head>

<body onload="retornaMacros()">

    <header>

        <img src="IMGS/logo's/logo_transparent.png" alt="">

        <nav>
            <li>Painel</li>
            <li><a href="bodyEvolution_dieta.html">Dieta</a></li>
            <li><a href="bodyEvolution_medidas.html">Medidas</a></li>
            <li><a href="bodyEvolution_exercicios.html">Exercicios</a></li>
            <button class="logout" id="logout" onclick="logoff()">Sair</button>
        </nav>


    </header>

    <aside id="percentual">

        <span id="nome_usuario_header"></span>

    </aside>

    <section id="estatisticas">

        <div class="box_macro" id="box_proteina">
            <span class="descMacro">Proteína</span>
            <br>
            <span class="gMacro" id="gMacroP"></span>
        </div>

        <div class="box_macro" id="box_gordura">
            <span class="descMacro">Gordura</span>
            <br>
            <span class="gMacro" id="gMacroG"></span>
        </div>
        <div class="box_macro" id="box_carbo">
            <span class="descMacro">Carboidrato</span>
            <br>
            <span class="gMacro" id="gMacroC"></span>
        </div>

        <br>

        <div class="central_Dieta">
    </section>

    </section>


</body>

</html>

<script>

    let usuario;

    verificar_autenticacao();

    nome_usuario_header.innerHTML = `Bem vindo(a), ${nomeUsuario}!`;

    function retornaMacros() {
        fetch(`/macros/ultimosMacros/${idUsuario}`)
            .then(resposta => {

                if (resposta.ok) {
                    resposta.json().then(function (resposta) {

                        // console.log(new Object(resposta[0]));

                        var dadosMacros = new Object(resposta[0]);

                        gMacroP.innerHTML = `${dadosMacros.proteina}g`;
                        gMacroG.innerHTML = `${dadosMacros.gordura}g`;
                        gMacroC.innerHTML = `${dadosMacros.carbo}g`;

                    });
                } else {

                    console.error('Nenhum dado encontrado ou erro na API');
                }
            })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados do caminhao p/ gráfico: ${error.message}`);
            });

    }



</script>